State design pattern described in polish here:
